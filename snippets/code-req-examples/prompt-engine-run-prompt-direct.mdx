
    <RequestExample>
    ```javascript Javascript
import { JigsawStack } from "jigsawstack";

const jigsaw = JigsawStack({ apiKey: "your-api-key" });

const response = await jigsaw.prompt_engine.run_direct({
      "prompt": "Tell me a story about {about}",
      "inputs": [
            {
                  "key": "about",
                  "optional": true,
                  "initial_value": "Leaning Tower of Pisa"
            }
      ],
      "return_prompt": "Return the result in a markdown format",
      "prompt_guard": [
            "sexual_content",
            "defamation"
      ],
      "input_values": {
            "about": "Santorini"
      }
})
    ```
    ```python Python
from jigsawstack import JigsawStack

jigsaw = JigsawStack(api_key="your-api-key")

response = jigsaw.prompt_engine.run_direct({
      "prompt": "Tell me a story about {about}",
      "inputs": [
            {
                  "key": "about",
                  "optional": True,
                  "initial_value": "Leaning Tower of Pisa"
            }
      ],
      "return_prompt": "Return the result in a markdown format",
      "prompt_guard": [
            "sexual_content",
            "defamation"
      ],
      "input_values": {
            "about": "Santorini"
      }
})
    ```
    ```bash Curl
curl https://api.jigsawstack.com//v1/prompt_engine/run \
 -X POST \
 -H 'Content-Type: application/json' \
 -H 'x-api-key: your-api-key' \
 -d '{"prompt":"Tell me a story about {about}","inputs":[{"key":"about","optional":true,"initial_value":"Leaning Tower of Pisa"}],"return_prompt":"Return the result in a markdown format","prompt_guard":["sexual_content","defamation"],"input_values":{"about":"Santorini"}}'
    ```
    ```php PHP
<?php
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, 'https://api.jigsawstack.com//v1/prompt_engine/run');
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_CUSTOMREQUEST, 'POST');
curl_setopt($ch, CURLOPT_HTTPHEADER, [
    'Content-Type: application/json',
    'x-api-key: your-api-key',
]);
curl_setopt($ch, CURLOPT_POSTFIELDS, '{"prompt":"Tell me a story about {about}","inputs":[{"key":"about","optional":true,"initial_value":"Leaning Tower of Pisa"}],"return_prompt":"Return the result in a markdown format","prompt_guard":["sexual_content","defamation"],"input_values":{"about":"Santorini"}}');

$response = curl_exec($ch);

curl_close($ch);

    ```
    ```ruby Ruby
require 'net/http'
require 'json'

uri = URI('https://api.jigsawstack.com//v1/prompt_engine/run')
req = Net::HTTP::Post.new(uri)
req.content_type = 'application/json'
req['x-api-key'] = 'your-api-key'

req.body = {
  'prompt' => 'Tell me a story about {about}',
  'inputs' => [
    {
      'key' => 'about',
      'optional' => true,
      'initial_value' => 'Leaning Tower of Pisa'
    }
  ],
  'return_prompt' => 'Return the result in a markdown format',
  'prompt_guard' => [
    'sexual_content',
    'defamation'
  ],
  'input_values' => {
    'about' => 'Santorini'
  }
}.to_json

req_options = {
  use_ssl: uri.scheme == 'https'
}
res = Net::HTTP.start(uri.hostname, uri.port, req_options) do |http|
  http.request(req)
end

    ```
    ```go Go
package main

import (
	"fmt"
	"io"
	"log"
	"net/http"
	"strings"
)

func main() {
	client := &http.Client{}
	var data = strings.NewReader(`{"prompt":"Tell me a story about {about}","inputs":[{"key":"about","optional":true,"initial_value":"Leaning Tower of Pisa"}],"return_prompt":"Return the result in a markdown format","prompt_guard":["sexual_content","defamation"],"input_values":{"about":"Santorini"}}`)
	req, err := http.NewRequest("POST", "https://api.jigsawstack.com//v1/prompt_engine/run", data)
	if err != nil {
		log.Fatal(err)
	}
	req.Header.Set("Content-Type", "application/json")
	req.Header.Set("x-api-key", "your-api-key")
	resp, err := client.Do(req)
	if err != nil {
		log.Fatal(err)
	}
	defer resp.Body.Close()
	bodyText, err := io.ReadAll(resp.Body)
	if err != nil {
		log.Fatal(err)
	}
	fmt.Printf("%s\n", bodyText)
}

    ```
    ```java Java
import java.io.IOException;
import java.net.URI;
import java.net.http.HttpClient;
import java.net.http.HttpRequest;
import java.net.http.HttpRequest.BodyPublishers;
import java.net.http.HttpResponse;

HttpClient client = HttpClient.newHttpClient();

HttpRequest request = HttpRequest.newBuilder()
    .uri(URI.create("https://api.jigsawstack.com//v1/prompt_engine/run"))
    .POST(BodyPublishers.ofString("{\"prompt\":\"Tell me a story about {about}\",\"inputs\":[{\"key\":\"about\",\"optional\":true,\"initial_value\":\"Leaning Tower of Pisa\"}],\"return_prompt\":\"Return the result in a markdown format\",\"prompt_guard\":[\"sexual_content\",\"defamation\"],\"input_values\":{\"about\":\"Santorini\"}}"))
    .setHeader("Content-Type", "application/json")
    .setHeader("x-api-key", "your-api-key")
    .build();

HttpResponse<String> response = client.send(request, HttpResponse.BodyHandlers.ofString());

    ```
    ```swift Swift
import Foundation

let jsonData = [
    "prompt": "Tell me a story about {about}",
    "inputs": [
        [
            "key": "about",
            "optional": true,
            "initial_value": "Leaning Tower of Pisa"
        ]
    ],
    "return_prompt": "Return the result in a markdown format",
    "prompt_guard": [
        "sexual_content",
        "defamation"
    ],
    "input_values": [
        "about": "Santorini"
    ]
] as [String : Any]
let data = try! JSONSerialization.data(withJSONObject: jsonData, options: [])

let url = URL(string: "https://api.jigsawstack.com//v1/prompt_engine/run")!
let headers = [
    "Content-Type": "application/json",
    "x-api-key": "your-api-key"
]

var request = URLRequest(url: url)
request.httpMethod = "POST"
request.allHTTPHeaderFields = headers
request.httpBody = data as Data

let task = URLSession.shared.dataTask(with: request) { (data, response, error) in
    if let error = error {
        print(error)
    } else if let data = data {
        let str = String(data: data, encoding: .utf8)
        print(str ?? "")
    }
}

task.resume()

    ```
    ```dart Dart
import 'package:http/http.dart' as http;

void main() async {
  final headers = {
    'Content-Type': 'application/json',
    'x-api-key': 'your-api-key',
  };

  final data = '{"prompt":"Tell me a story about {about}","inputs":[{"key":"about","optional":true,"initial_value":"Leaning Tower of Pisa"}],"return_prompt":"Return the result in a markdown format","prompt_guard":["sexual_content","defamation"],"input_values":{"about":"Santorini"}}';

  final url = Uri.parse('https://api.jigsawstack.com//v1/prompt_engine/run');

  final res = await http.post(url, headers: headers, body: data);
  final status = res.statusCode;
  if (status != 200) throw Exception('http.post error: statusCode= $status');

  print(res.body);
}

    ```
    ```kotlin Kotlin
import java.io.IOException
import okhttp3.MediaType.Companion.toMediaType
import okhttp3.OkHttpClient
import okhttp3.Request
import okhttp3.RequestBody.Companion.toRequestBody

val client = OkHttpClient()

val MEDIA_TYPE = "application/json".toMediaType()

val requestBody = "{\"prompt\":\"Tell me a story about {about}\",\"inputs\":[{\"key\":\"about\",\"optional\":true,\"initial_value\":\"Leaning Tower of Pisa\"}],\"return_prompt\":\"Return the result in a markdown format\",\"prompt_guard\":[\"sexual_content\",\"defamation\"],\"input_values\":{\"about\":\"Santorini\"}}"

val request = Request.Builder()
  .url("https://api.jigsawstack.com//v1/prompt_engine/run")
  .post(requestBody.toRequestBody(MEDIA_TYPE))
  .header("Content-Type", "application/json")
  .header("x-api-key", "your-api-key")
  .build()

client.newCall(request).execute().use { response ->
  if (!response.isSuccessful) throw IOException("Unexpected code $response")
  response.body!!.string()
}

    ```
    ```csharp C#
using System.Net.Http;
using System.Net.Http.Headers;

HttpClient client = new HttpClient();

HttpRequestMessage request = new HttpRequestMessage(HttpMethod.Post, "https://api.jigsawstack.com//v1/prompt_engine/run");

request.Headers.Add("x-api-key", "your-api-key");

request.Content = new StringContent("{\"prompt\":\"Tell me a story about {about}\",\"inputs\":[{\"key\":\"about\",\"optional\":true,\"initial_value\":\"Leaning Tower of Pisa\"}],\"return_prompt\":\"Return the result in a markdown format\",\"prompt_guard\":[\"sexual_content\",\"defamation\"],\"input_values\":{\"about\":\"Santorini\"}}");
request.Content.Headers.ContentType = new MediaTypeHeaderValue("application/json");

HttpResponseMessage response = await client.SendAsync(request);
response.EnsureSuccessStatusCode();
string responseBody = await response.Content.ReadAsStringAsync();

    ```
    </RequestExample>
    <ResponseExample>
    ```json Response
{
      "success": true,
      "result": "Okay, here's a story about Santorini, formatted in Markdown:\n\n# The Whispers of Oia\n\nThe Aegean Sea, a shimmering sapphire under the late afternoon sun, lapped gently against the black volcanic sand of Perissa beach. Eleni, a young woman with eyes the color of the deep blue caldera, traced patterns in the sand with her bare toes. She wasn't a tourist, though she could easily pass for one with her sun-kissed skin and the way she tilted her head, absorbing the beauty of her island home. Eleni was a storyteller, a keeper of Santorini's secrets, passed down through generations.\n\nToday, she was waiting for Dimitri, an old fisherman with a face etched with the wisdom of the sea and the stories of a thousand sunsets. He was the last of the true storytellers, the one who knew the whispers of Oia, the secrets hidden within the whitewashed walls and the ancient volcanic rock.\n\nAs the sun began its descent, painting the sky in hues of orange, pink, and violet, Dimitri appeared, his weathered hands clutching a small, intricately carved wooden box. He sat beside Eleni, the silence between them comfortable and familiar.\n\n\"The tourists,\" Dimitri began, his voice raspy like the wind whistling through the caldera, \"they see the beauty, the postcard perfection. But they don't hear the whispers.\"\n\nHe opened the box, revealing a collection of smooth, volcanic stones, each one a different shade of black and grey. \"Each stone holds a story,\" he explained, picking up a stone the size of his thumb. \"This one remembers the Minoan eruption, the day the island was ripped apart, the day Atlantis was lost.\"\n\nHe told Eleni of the Minoans, their advanced civilization swallowed by the sea, their legacy buried beneath layers of ash and pumice. He spoke of the resilience of the islanders who returned, rebuilding their lives on the edge of a sleeping giant.\n\nHe showed her another stone, this one smooth and almost perfectly round. \"This one remembers the pirates,\" he said, a twinkle in his eye. \"The daring raids, the hidden treasures, the secret tunnels that snake beneath Oia.\" He recounted tales of swashbuckling adventures, of hidden coves and daring escapes.\n\nAs the last sliver of sun dipped below the horizon, Dimitri held up the final stone, a jagged piece of obsidian. \"This one remembers the love,\" he whispered. \"The enduring love that binds the people to this island, the love that makes them rebuild after every earthquake, every eruption, every hardship.\"\n\nHe told her of the love between a young shepherd and a beautiful artist, their romance blossoming amidst the ruins of the old city. He spoke of the love of family, the unwavering support that held the community together.\n\nDimitri closed the box, the whispers of Santorini safely contained within. He looked at Eleni, his eyes filled with hope. \"It is your turn now, Eleni,\" he said. \"You must keep the whispers alive. You must tell the stories to those who are willing to listen, to those who can hear the heart of this island.\"\n\nEleni nodded, her heart filled with a sense of responsibility and a deep love for her home. As the stars began to twinkle in the inky sky, she knew that she would carry on the tradition, sharing the whispers of Oia, ensuring that the stories of Santorini would never be forgotten. The island, bathed in moonlight, seemed to hum with ancient secrets, waiting to be told. And Eleni, the young storyteller, was ready to listen.\n",
      "message": "It is recommended to store the prompt engine and execute it using the ID rather than running it directly for the best performance and reliability. Learn more: https://jigsawstack.com/docs/api-reference/prompt-engine/create",
      "_usage": {
            "input_tokens": 67,
            "output_tokens": 934,
            "inference_time_tokens": 5555,
            "total_tokens": 6556
      }
}
    ```
    </ResponseExample>
    
    